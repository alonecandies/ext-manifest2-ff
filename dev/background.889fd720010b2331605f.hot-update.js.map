{"version":3,"file":"background.889fd720010b2331605f.hot-update.js","sources":["/Users/maddie/Desktop/Work/junctionx/ext-manifest2-ff/src/background/index.js"],"sourcesContent":["/* eslint-disable no-undef */\nimport browser from \"webextension-polyfill\";\n\nconst connections = {};\nglobal.connections = connections;\n\ninitialize().catch(console.error);\n\nasync function initialize() {\n  browser.runtime.onConnect.addListener(connectRemote);\n}\n\nbrowser.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.type === \"get_page_info\") {\n    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n      sendResponse(tabs[0]);\n    });\n  }\n\n  return true;\n});\n\nvar clickHandler = function (e) {\n  fetch(\"http://localhost:45000/feedback\",{\n    method: \"POST\",\n    headers: {},\n    body: JSON.stringify({\n      url: e.linkUrl,\n      content:\"\",\n      type:\"\"\n    }),\n  });\n};\n\nchrome.contextMenus.removeAll(function () {\n  chrome.contextMenus.create({\n    title: \"Report this link\",\n    contexts: [\"link\"],\n    id: \"report-link\",\n    onclick: clickHandler,\n  });\n});\n\n\n// /**\n//  * A runtime.Port object, as provided by the browser:\n//  *\n//  * @see https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/runtime/Port\n//  * @typedef Port\n//  * @type Object\n//  */\n\n// /**\n//  * @param {Port} remotePort - The port provided by a new context.\n//  */\nfunction connectRemote(remotePort) {\n  remotePort.onMessage.addListener((msg) => {\n    console.log(msg, remotePort);\n  });\n}\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}